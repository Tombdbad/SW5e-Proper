// ------------------------------------
// CHARACTER DETAILS COMPONENT
// ------------------------------------
import React from 'react';
import { useFormContext } from 'react-hook-form';
import { CharacterData } from '../../pages/CharacterCreation';
import { ALIGNMENTS } from '../../lib/sw5e/constants';
import FormField from '../ui/FormField';
import TextInput from '../ui/TextInput';
import SelectInput from '../ui/SelectInput';
import NumberInput from '../ui/NumberInput';
import TextAreaInput from '../ui/TextAreaInput';
import ErrorMessage from '../ui/ErrorMessage';
import InfoTooltip from '../ui/InfoTooltip';

interface CharacterDetailsProps {
  form: ReturnType<typeof useFormContext<CharacterData>>;
}

const CharacterDetails: React.FC<CharacterDetailsProps> = ({ form }) => {
  const { register, formState: { errors } } = form;

  return (
    <div className="space-y-6">
      <h2 className="text-2xl font-bold text-yellow-400 mb-4">Basic Character Details</h2>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        {/* Character Name */}
        <FormField label="Character Name" required>
          <TextInput
            {...register('name')}
            placeholder="Enter character name"
            error={!!errors.name}
          />
          {errors.name && <ErrorMessage>{errors.name.message}</ErrorMessage>}
        </FormField>

        {/* Alignment */}
        <FormField label="Alignment" required>
          <SelectInput
            {...register('alignment')}
            options={ALIGNMENTS.map(alignment => ({
              value: alignment,
              label: alignment
            }))}
            error={!!errors.alignment}
          />
          {errors.alignment && <ErrorMessage>{errors.alignment.message}</ErrorMessage>}
          <InfoTooltip>
            Your character's moral and ethical alignment in the galaxy. This affects roleplaying and some game mechanics.
          </InfoTooltip>
        </FormField>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {/* Gender */}
        <FormField label="Gender">
          <TextInput
            {...register('gender')}
            placeholder="Optional"
          />
        </FormField>

        {/* Age */}
        <FormField label="Age">
          <NumberInput
            {...register('age', { valueAsNumber: true })}
            min={1}
            placeholder="25"
          />
        </FormField>

        {/* Level - Usually set to 1 for new characters */}
        <FormField label="Level" required>
          <NumberInput
            {...register('level', { valueAsNumber: true })}
            min={1}
            max={20}
            defaultValue={1}
            error={!!errors.level}
          />
          {errors.level && <ErrorMessage>{errors.level.message}</ErrorMessage>}
        </FormField>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        {/* Height */}
        <FormField label="Height">
          <TextInput
            {...register('height')}
            placeholder="e.g., 1.8m or 6ft"
          />
        </FormField>

        {/* Weight */}
        <FormField label="Weight">
          <TextInput
            {...register('weight')}
            placeholder="e.g., 75kg or 165lbs"
          />
        </FormField>
      </div>

      {/* Character Description */}
      <FormField label="Character Description">
        <TextAreaInput
          {...register('description')}
          rows={4}
          placeholder="Describe your character's appearance, personality, and background..."
        />
        <InfoTooltip>
          Add details about your character's appearance, personality traits, ideals, bonds, and flaws. This helps bring your character to life during gameplay.
        </InfoTooltip>
      </FormField>

      <div className="bg-blue-900 bg-opacity-20 p-4 rounded-md mt-6">
        <h3 className="text-blue-300 font-semibold mb-2">Character Detail Tips</h3>
        <ul className="list-disc list-inside text-sm space-y-1 text-blue-100">
          <li>Your character name should reflect the Star Wars universe.</li>
          <li>Alignment affects certain Force abilities and roleplaying options.</li>
          <li>Character description helps the Game Master integrate your character into the campaign setting.</li>
          <li>Starting characters are typically level 1, but your Game Master may specify a different starting level.</li>
        </ul>
      </div>
    </div>
  );
};

export default CharacterDetails;